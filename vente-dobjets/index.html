<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>VENTE D'OBJETS</title>
     <style>
          body {
               margin: 0;
               background-color: gainsboro;
          }

          .title {
               position: fixed;
               z-index: 10;
               height: 100vh;
               width: 100vw;
               display: flex;
               flex-direction: column;
               justify-content: center;
               align-items: center;
          }

          .title img {
               height: 10vw;
               width: auto;
               max-height: 14vw;
          }


          #object {
               width: 100vw;
               height: 100vh;
               z-index: 10;
               position: relative;

               box-sizing: border-box;

               display: flex;
               flex-direction: column;
               align-items: center;
               justify-content: center;
          }

          #object img {
               height: 90%;
               object-fit: contain;
               /* background-color: forestgreen; */
          }

          video {
               position: fixed;
               z-index: 1;
               height: 100vh;
               width: 100vw;
               top: 0;
               background-color: red;
               object-fit: cover;
          }

          .bg {
               position: fixed;
               z-index: 0;
               height: 100vh;
               width: 100vw;
               top: 0;
               background-color: blue;
               object-fit: cover;

               background-image: url(media/banco.png);
               background-size: cover;
          }

          #bgButton {
               height: 30px;
               width: 30px;
               position: fixed;
               bottom: 0;
               left: 0;
               background-color: white;
               z-index: 200;
          }

          #bgButton:hover {
               cursor: pointer;
          }
     </style>
</head>

<body>

     <div class="title">
          <img src="line-vente.svg" alt="" style="margin-bottom: 1rem;">
          <img src="line-objets.svg" alt="">
     </div>

     <div id="object">
          <img src="media/tripode.png" alt="" class="">
     </div>


     <video autoplay id="video"></video>

     <div id="bgButton" onclick="changeBackground()"></div>
     <div class="bg"></div>


     </div>
     <script>
          // REAR CAMERA PHONE

          if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
               const constraints = {
                    video: {
                         facingMode: "environment"
                    },
               }

               var video = document.getElementById("video"),
                    vendorURL = window.URL || window.webkitURL;

               if (navigator.mediaDevices.getUserMedia) {
                    navigator.mediaDevices.getUserMedia(constraints)
                         .then(function (stream) {
                              video.srcObject = stream;
                         }).catch(function (error) {
                              console.log("Something went wrong");
                         });
               }
          }
          else {
               var video = document.getElementById("video");
               video.remove();
          }

          // CHANGE BACKGROUNDS
          const myArray = ["bg-air.JPG", "bg-table.JPG", "bg-sol.JPG"];

          var currentIndex = 0;

          function changeBackground() {
               // Ensure we don't go out of bounds
               if (currentIndex < myArray.length) {
                    // Get the current item
                    const currentItem = myArray[currentIndex];
                    // Display the current item (you can replace this with your own logic)
                    document.querySelector(".bg").style.backgroundImage = "url(media/" + currentItem + ")"

                    // Increment the index for the next click
                    currentIndex++;

               } else {
                    currentIndex = 0;
                    changeBackground()
               }
          }

          window.addEventListener("load", (event) => {
               changeBackground()
          });


          // var MAX_IMAGE_WIDTH = 200; // repalce magic number with const
          // var MAX_IMAGE_HEIGHT = 150;   // repalce magic number with const
          // var docWidth = document.body.clientWidth;  //replace $(document).width()
          // var docHeight = document.body.clientHeight || 500;  //Note: document.body.clientHeight returns 0 in this envorment, in browser will be actaul height, setting defalult value of 500
          // // prevent negitve values that could place your image off screen
          // var maxWidth = Math.max(0, docWidth - MAX_IMAGE_WIDTH);
          // var maxHeight = Math.max(0, docHeight - MAX_IMAGE_HEIGHT);

          // var image = [ //set innital values and prevent variable hoisiting
          //      "media/banco.png",
          //      "media/silla.png",
          //      "media/rangements.png",
          //      "media/yogurtera.png",
          //      "media/tripode.png",
          // ];

          // function getImage(src, top, left) {
          //      var imgElement = document.createElement("img");
          //      imgElement.classList.add("objects");
          //      imgElement.src = src;
          //      imgElement.style.top = top + 'px';
          //      imgElement.style.left = left + 'px';
          //      imgElement.style.position = 'absolute';

          //      return imgElement;
          // }

          // console.log(image)

          // function start() {
          //      for (let i = 0, max = image.length; i < max; i++) {
          //           var left_position = (Math.random() * maxWidth).toFixed();
          //           //Assume you wanted height and not width
          //           var top_position = (Math.random() * maxHeight).toFixed();
          //           var imgEl = getImage(image[i], top_position, left_position);
          //           document.body.appendChild(imgEl);
          //      }
          // }

          // start()

     </script>

</body>

</html>